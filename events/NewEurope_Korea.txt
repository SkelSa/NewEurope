##This file will contain the Korean War event chains. More possible stuff concerning Korea may follow...

#add_namespace = ne_korea
add_namespace = ne_korean_war



##DPRK/ROK get free factories
country_event = {
	id = ne_korea.1
	title = ne_korea.1.t
	desc =  ne_korea.1.d
	picture = GFX_somepic

	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes

	
	trigger = {
	
		

	}
	
	
	mean_time_to_happen = {	days = 1 }
	
	immediate = { 
		set_country_flag = flag_settings 
	}
	
	
	option = { # option one
		name = ne_korea.1.a
		ai_chance = { factor = 100 }	
		
		
		
	}

	
}












#KOREAN WAR

##NORTH KOREA INVADES THE SOUTH, DPRK gets event!
country_event = {
	id = ne_korean_war.1                      
	title = ne_korean_war.1.t 
	desc =  ne_korean_war.1.d  
	picture = GFX_report_event_soviet_invasion_map

	fire_only_once = yes
	
	
	trigger = {
	
		DPR = {
			exists = yes
			has_war = no
			has_government = communism
		}
		
		KOR = {
			exists = yes
			has_war = no
			has_government = democratic
		}
		
		tag = DPR

		has_global_flag = korea_divided

	
		DPR = {		
		num_of_factories > 20
		num_divisions > 12
		}
		
		KOR = {	
		num_of_factories > 15
		num_divisions > 8
		}

	}
	
	mean_time_to_happen = { days = 70 }
	
	option = {
			name = ne_korean_war.1.a 
			ai_chance = { factor = 98}
			
			add_political_power = 150
			add_national_unity =  0.1
			add_popularity = { ideology = communism popularity = 0.5 } 			
			army_experience = 30 
			air_experience = 30
			navy_experience = 30
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 10000 producer = DPR } 
			add_manpower = 100000
			declare_war_on = { target = KOR type = annex_everything } 
			
			
			
			if = {
			limit = { has_idea = low_economic_mobilisation }
			add_ideas = war_economy
			}
			if = {
				limit = { has_idea = civilian_economy }
				add_ideas = war_economy
			}
			if = {
				limit = { has_idea = partial_economic_mobilisation }
				add_ideas = war_economy
			}
			if = {
				limit = { has_idea = volunteer_only }
				add_ideas = limited_conscription
			}
			if = {
				limit = { has_idea = limited_conscription }
				add_ideas = extensive_conscription
			}
			if = {
				limit = { has_idea = disarmed_nation }
				add_ideas = volunteer_only
			}
			
			KOR = { country_event = { days = 2 id = ne_korean_war.2 } }
			
			add_named_threat = { threat = 10 name = threat_ne_korean_war }
			
			##hidden debug event to set flag that war has started
			DPR = { country_event = { days = 90 id = ne_fix.4 } }

	}

		
	##PEACE is better	
	option = {
		name = ne_korean_war.1.b
		ai_chance = { factor = 2}

			add_political_power = -50
			add_national_unity = -0.05
			add_popularity = { ideology = communism popularity = -0.2 } 			
			army_experience = -10 
			air_experience = -10 
			navy_experience = -10 			

	}
	
}


##SOUTH KOREA IS SHOCKED
country_event = {
	id = ne_korean_war.2                      
	title = ne_korean_war.2.t 
	desc =  ne_korean_war.2.d  
	picture = GFX_report_event_soviet_invasion_map

	is_triggered_only = yes	
	fire_only_once = yes
		
	
	option = {
			name = ne_korean_war.2.a 
			add_political_power = 100
			add_national_unity =  0.2
			add_popularity = { ideology = democratic popularity = 0.5 } 
			add_popularity = { ideology = communism popularity = -0.3 } 
			add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 10000 producer = USA } 
			add_manpower = 80000
			

			if = {
			limit = { has_idea = low_economic_mobilisation }
			add_ideas = war_economy
			}
			if = {
				limit = { has_idea = civilian_economy }
				add_ideas = war_economy
			}
			if = {
				limit = { has_idea = partial_economic_mobilisation }
				add_ideas = war_economy
			}
			if = {
				limit = { has_idea = volunteer_only }
				add_ideas = limited_conscription
			}
			if = {
				limit = { has_idea = limited_conscription }
				add_ideas = extensive_conscription
			}
			if = {
				limit = { has_idea = disarmed_nation }
				add_ideas = volunteer_only
			}

			
		hidden_effect = {	
			news_event = { days = 1 id = ne_news.12 }	
		}
			
	}

}


##WAR HAS BOGGED DOWN, ASK FOR PEACE? event for DPR
country_event = {
	id = ne_korean_war.3                      
	title = ne_korean_war.3.t 
	desc =  ne_korean_war.3.d  

	picture = GFX_report_event_soviet_invasion_map

	fire_only_once = yes
	
	
	trigger = {
	
		DPR = {	
			exists = yes
			has_government = communism
		}
		
		KOR = {
			exists = yes
			has_government = democratic
		}
		
		NOT = { USA = { has_war_with = SOV } }
		NOT = { ENG = { has_war_with = SOV } }
		
		tag = DPR
		
		DPR = { 		
			has_offensive_war_with = KOR
			controls_state = 527
			surrender_progress < 0.25
		}
		
		KOR = { 	
			has_defensive_war_with = DPR
			controls_state = 525
			surrender_progress < 0.25
		}

		has_global_flag = ne_korean_war

	}
	
	mean_time_to_happen = {	
		days = 60	
	}
	
	
	option = {
		name = ne_korean_war.3.a
		ai_chance = { factor = 90 }
			add_political_power = 30
			add_national_unity =  -0.01
			add_popularity = { ideology = communism popularity = -0.1 } 			

		KOR = { country_event = { days = 2 id = ne_korean_war.4 } }
			

	}

		
	##WE CAN STILL WIN	
	option = {
		name = ne_korean_war.3.b
		ai_chance = { factor = 10 }

			add_political_power = -10
			add_national_unity = -0.05
			add_popularity = { ideology = communism popularity = -0.05 } 			
	}
	
}


##Peace fire event, event gets KOR
country_event = {
	id = ne_korean_war.4                      
	title = ne_korean_war.4.t 
	desc =  ne_korean_war.4.d  
	picture = GFX_report_event_soviet_invasion_map

	is_triggered_only = yes	
	fire_only_once = yes

	##We agree to DPR's peace
	option = {
		name = ne_korean_war.4.a 
		ai_chance = { factor = 5 }
		
			add_political_power = 60
			add_national_unity =  0.05
			add_popularity = { ideology = democratic popularity = 0.2 } 
			add_popularity = { ideology = communism popularity = -0.1 } 

			if = {
			limit = { has_idea = low_economic_mobilisation }
			add_ideas = civilian_economy
			}
			if = {
				limit = { has_idea = war_economy }
				add_ideas = civilian_economy
			}
			if = {
				limit = { has_idea = partial_economic_mobilisation }
				add_ideas = civilian_economy
			}
			if = {
				limit = { has_idea = limited_conscription }
				add_ideas = volunteer_only
			}
			if = {
				limit = { has_idea = extensive_conscription }
				add_ideas = volunteer_only
			}
			if = {
				limit = { has_idea = service_by_requirement }
				add_ideas = volunteer_only
			}
			
			add_opinion_modifier = { target = DPR modifier =  peace_treaty}
			reverse_add_opinion_modifier = { target = DPR modifier = peace_treaty}
			
			DPR = { add_timed_idea = { idea = NE_neutrality days = 170 }  }
			KOR = { add_timed_idea = { idea = NE_neutrality days = 170 }  }
		
			
			##Whitepeace event, needs testing in case faction war still exists	
			KOR = { white_peace = DPR }

			add_named_threat = { threat = -5 name = threat_ne_korea_cf }
			
			hidden_effect = {
				FROM = { country_event = {  days = 1 id = ne_korean_war.5 } }
				news_event = { days = 2 id = ne_news.13 }	
			}


	}
	
	##We will never surrender
	option = {
			name = ne_korean_war.4.b
			ai_chance = { factor = 5 }
			
			##Population is pissed, war continues		
			add_political_power = -100
			add_national_unity =  -0.2
			add_popularity = { ideology = democratic popularity = -0.3 }

			hidden_effect = {
	
				news_event = { days = 2 id = ne_news.14 }
			}

	}


}


##ne_korean_war.5 sets the DMZ and state changes
country_event = {
	id = ne_korean_war.5

	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = { 
	
		##switch to 1953 border
		DPR = {
			transfer_state = 762
			transfer_state = 769
			transfer_state = 770
		}

		KOR = {
			transfer_state = 763
			transfer_state = 768
			transfer_state = 771	
		}
	
	
		##the DMZ gets a DMZ
		768 = { set_demilitarized_zone = yes } 
		769 = { set_demilitarized_zone = yes } 
		770 = { set_demilitarized_zone = yes } 
		771 = { set_demilitarized_zone = yes } 

	}
	
	
	option = { #placeholder
		#		
	}

	
}

