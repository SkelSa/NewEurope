##This file is for ACTIVE testing of your events, previously created in NE_additions_"yourname".
##Remove your events after your test are finished


##Add your namespaces down here:
add_namespace = ne_skelsa


##Info concerning the annexation of the Baltic States: ne_skelsa.59
country_event = {
	id = ne_skelsa.59
	title = ne_skelsa.59.t
	desc =  ne_skelsa.59.d
	picture = GFX_soviet_in_riga

	fire_only_once = yes
	
	mean_time_to_happen = { days = 5 }
	
	trigger = {
	
		tag = SOV
		SOV = { has_completed_focus = SOV_claims_on_baltic } 
		NOT = { SOV = { has_completed_focus = SOV_baltic_security } }
		
	}
	
	
	option = {	#I understand
		name = ne_skelsa.59.a
			
	}
	
	
}


##Soviet Union: Ultimatum to the Baltic States : ne_skelsa.60

##Request military access (Should represent Soviet bases there)
##Estonia also will guarantee SOV and SOV them


##Soviet invasion of the three states; NE_neutrality will be added once the invasion starts. Remove NE_neutrality after they are puppets.
##Soviets: Establish military presence in the Baltics
country_event = {
	id = ne_skelsa.60
	title = ne_skelsa.60.t
	desc =  ne_skelsa.60.d
	picture = GFX_report_event_soviet_in_riga

	fire_only_once = yes
	
	
	trigger = {
	
		tag = SOV
		
		POL = { has_capitulated = yes }
		
		SOV = { has_completed_focus = SOV_claims_on_baltic } 
		SOV = { has_completed_focus = SOV_baltic_security } 
		
	}

	
	mean_time_to_happen = {	days = 35 }
	
	
	option = {	# force Baltics to agree to military access. EST and SOV will guarantee each other
		name = ne_skelsa.60.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes		
			}			
		}

		##Effects
		if = {
			limit = {		
				EST = {
					exists = yes
					NOT = { is_subject_of = SOV }
				}
			}
				
			EST = { country_event = { days = 2 id = ne_skelsa.61 } }			
		}
		
		if = {
			limit = {		
				LAT = {
					exists = yes
					NOT = { is_subject_of = SOV }
				}
			}
				
			LAT = { country_event = { days = 2 id = ne_skelsa.61 } }			
		}
		
		if = {
			limit = {		
				LIT = {
					exists = yes
					NOT = { is_subject_of = SOV }
				}
			}
				
			LIT = { country_event = { days = 1 id = ne_skelsa.61 } }			
		}
		
		hidden_effect = {
			SOV = { country_event = { days = 120 id = ne_skelsa.64 } }		
		}

			
	}
	
	
	option = {	# This would take too long, declare war now!
		name = ne_skelsa.60.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes			
			}			
		}
		
		##Effects
		add_political_power = -60

		create_wargoal = {	type = annex_everything	target = LIT }
		create_wargoal = {	type = annex_everything	target = LAT }
		create_wargoal = {	type = annex_everything	target = EST }

		hidden_effect = {	
			#				
		}	
	
	}
	
	
}



##The Baltics see the demands, can either accept or tell the Soviets to fuck off
country_event = {
	id = ne_skelsa.61
	title = ne_skelsa.61.t
	desc =  ne_skelsa.61.d
	picture = GFX_report_event_soviet_invasion_map

	is_triggered_only = yes
	fire_only_once = yes

	
	
	option = {	#ok, soviets, you get your access
		name = ne_skelsa.61.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes			
			}			
		}
		
		##Effects		
		add_political_power = -60
		
		give_military_access = SOV
		SOV = { give_military_access = ROOT }
		
		
		if = {
			limit = {
				tag = EST
			}
			
			give_guarantee = SOV
			SOV = { give_guarantee = EST }			
		}
		
		
		SOV = { country_event = { days = 1 id = ne_skelsa.62 } }
		
	}
	
	option = {	#stay stubborn
		name = ne_skelsa.61.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes			
			}			
		}
		
		##Effects
		
		add_national_unity = 0.20
		add_political_power = 150
	
		SOV = { country_event = { days = 1 id = ne_skelsa.63 } }
	
	}
	
	
}



##SOV: Baltic Country has accepted
country_event = {
	id = ne_skelsa.62
	title = ne_skelsa.62.t
	desc =  ne_skelsa.62.d
	picture = GFX_report_event_molotov_signing_pact

	is_triggered_only = yes
	fire_only_once = yes
	
	
	option = {	#Nice
		name = ne_skelsa.1.a
		
		##Effects
		add_political_power = 10
		FROM = { set_country_flag = ne_baltics_accepted }
			
	}
	
	
}



##SOV: Baltic Country has refused; gain wargoal
country_event = {
	id = ne_skelsa.63
	title = ne_skelsa.63.t
	desc =  ne_skelsa.63.d
	picture = GFX_report_event_molotov_signing_pact

	#hidden = yes
	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#Idiots, they will pay in blood
		name = ne_skelsa.63.a
		
		add_political_power = -10
		
		##SOV gains war goal!
		SOV = {
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
		}
			
	}
	
	
}



##SOV: Preparing the Invasion of the Baltics
country_event = {
	id = ne_skelsa.64
	title = ne_skelsa.64.t
	desc =  ne_skelsa.64.d
	picture = GFX_report_event_soviet_in_riga

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
	
	hidden_effect = {
	
		every_country = {
			limit = {
				has_country_flag = ne_baltics_accepted
			}							
						
			##SOV are amassing troops along the border
			country_event = { days = 1 id = ne_skelsa.65 } 			
												
			}
			
		}	
		
	}
	
	
	option = {	#Make everything ready
		name = ne_skelsa.64.a
		
		add_political_power = 40
		add_manpower = 25000
		
		##SOV gains war goal!
		hidden_effect = {
		
			every_country = {
				limit = {
					has_country_flag = ne_baltics_accepted
				}							
				
				add_ideas = NE_neutrality
				
				SOV = { 
					create_wargoal = {
					type = puppet_wargoal_focus
					target = PREV
					}
				}		
			
			}
			
			##USA will get an event in 3 days
			USA = { country_event = { days = 3 id = ne_skelsa.82 } }

		}
		
	}
	
	
}


##Baltic States: SOV prepares to invade..
country_event = {
	id = ne_skelsa.65
	title = ne_skelsa.65.t
	desc =  ne_skelsa.65.d
	picture = GFX_report_event_soviet_in_riga

	is_triggered_only = yes

	
	option = {	#better prepare
		name = ne_skelsa.65.a
		
		##Effects
		add_political_power = 30
		add_manpower = 30000
		
		##TEST
		add_opinion_modifier = { target = SOV modifier = tizard_refused } 
			
	}
	
	
}


##Baltic States: Collapse
country_event = {
	id = ne_skelsa.66
	title = ne_skelsa.66.t
	desc =  ne_skelsa.66.d
	picture = GFX_report_event_soviet_in_riga


	trigger = {
	
		exists = yes
		has_war_with = SOV
		has_country_flag = ne_baltics_accepted
		surrender_progress > 0.35
			
	}
	
	
	option = {	#We have lost our country
		name = ne_skelsa.66.a
		
		##Effects
		add_political_power = -100
		add_national_unity = -0.10
		
		if = {
			limit = {
				OR = {
					tag = EST
					tag = LAT
				}
			}
		
			set_global_flag = ne_baltic_leaders_killed
		}
		
		SOV = { country_event = { days = 1 id = ne_skelsa.66 } }			
			
	}
	
	
}


##Soviet Union: Baltic States collapses.
country_event = {
	id = ne_skelsa.67
	title = ne_skelsa.67.t
	desc =  ne_skelsa.67.d
	picture = GFX_report_event_soviet_in_riga

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
		
			##Kill baltic leaders
			if = {
				limit = {
					has_global_flag = ne_baltic_leaders_killed
					EST = { has_country_leader = { name = "Konstantin Päts" } }				
				}
				EST = { kill_country_leader = yes }
			}
		
			if = {
				limit = {
					has_global_flag = ne_baltic_leaders_killed
					LAT = { has_country_leader = { name = "Karlis Ulmanis" } }				
				}
				LAT = { kill_country_leader = yes }
			}
			
		}
	
	}
	
	option = {	#Turn them into puppets!
		name = ne_skelsa.67.a
					
		SOV = { puppet = FROM }
		if = { limit = { FROM = { has_idea = NE_neutrality }} remove_ideas = NE_neutrality }
		FROM = { set_country_flag = ne_baltic_puppet }
			
		clr_global_flag = ne_baltic_leaders_killed
		
	}
	
	
}



##Baltics (Communist): Hold plebiscite to join the USSR
country_event = {
	id = ne_skelsa.68
	title = ne_skelsa.68.t
	desc =  ne_skelsa.68.d
	picture = GFX_report_event_soviet_in_riga

	trigger = {
		
		is_subject_of = SOV
		has_government = communism
		NOT = { has_country_flag = plebiscite_join_ussr }
		
		OR = {
			tag = EST
			tag = LAT
			tag = LIT		
		}
	
	}
	
	immediate = {
	
		hidden_effect = {		
			set_country_flag = plebiscite_join_ussr		
		}		
	
	}

	
	option = {	#Hold the plebiscite!
		name = ne_skelsa.68.a

		custom_effect_tooltip = GAME_OVER_TT
		
		##SOV gets event		
		SOV = { country_event = { days = 1 id = ne_skelsa.69 } }
		
	}
	
	
}



##Soviet: Baltic country wishes to be annexed!
country_event = {
	id = ne_skelsa.69
	title = ne_skelsa.69.t
	desc =  ne_skelsa.69.d
	picture = GFX_report_event_soviet_in_riga
	
	is_triggered_only = yes
	#fire_only_once = yes	 ##Only one country would be absorbed!

	
	option = {	#We welcome then!
		name = ne_skelsa.69.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes			
			}			
		}

		annex_country = { target = FROM }	##annex the baltic country
		
		every_state = {						##gain cores on the territory
			limit = {
				is_core_of = FROM
			}
			SOV = { add_state_core = PREV }
		}
 		
		
	}
	
	option = {	#They should stay our puppet!
		name = ne_skelsa.69.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes			
			}			
		}

		FROM = { clr_country_flag = ne_baltic_puppet }		
		
	}
	
	
}



##USA: US condemns Soviet expansionism 
country_event = {
	id = ne_skelsa.83
	title = ne_skelsa.83.t
	desc =  ne_skelsa.83.d
	picture = GFX_report_event_FDR_speech

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
	
		USA = { 
			exists = yes 
			NOT = { has_opinion = { target = SOV value > 40 } }
		}
		
		SOV = { has_war = yes }
		
	}
	
	option = {	#negative opinion modifier
		name = ne_skelsa.83.a

		##Effects
		add_political_power = 5
		add_opinion_modifier = { target = SOV modifier = baltic_annexation } 
		SOV = { country_event = { days = 1 id = ne_skelsa.82 } }
			
	}

	
}



##SOV: is informed about US' condemnation
country_event = {
	id = ne_skelsa.84
	title = ne_skelsa.84.t
	desc =  ne_skelsa.84.d
	picture = GFX_report_event_FDR_speech

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#pp loss (small)
		name = ne_skelsa.84.a

		##Effects
		add_political_power = -20
			
	}

	
}