##New events by SkelSa here! 


add_namespace = ne_skelsa
add_namespace = ne_faction
add_namespace = ne_flag
add_namespace = namespace
add_namespace = ne_city




##NE_FACTION##################################################

##ne_strict_facton

##NATO/WARSAW PACT was founded, stricter settings were enabled
##DISTRIBUTE SPIRITS AND REDUCE DEMOCRATIC/COMMUNISM LEVEL  
country_event = {
	id = ne_faction.1
	title = ne_faction.1.t
	desc = ne_faction.1.d
	picture = GFX_finnish_soldiers_snow

	hidden = yes
	fire_only_once = yes

	
	trigger = {
	
		has_global_flag = ne_strict_faction
		has_global_flag = nato_founded
		has_global_flag = warsaw_pact_founded
		
		USA = { 
			is_faction_leader = yes 
			has_government = democratic 
		}
		
		SOV = { 
			is_faction_leader = yes 
			has_government = communism
		}
		
	}
	
	
	mean_time_to_happen = {	days = 12 }
	
	immediate = { 
	
		##democratic nations
		every_country = {
			limit = {
				NOT = {
					tag = USA
					has_idea = NE_nato_member				
				}
				
				has_government = democratic
				democratic > 0.55				
			}
			
			set_political_party = { ideology = democratic popularity = 0.52 } 
			add_ideas = NE_align_west		
		}
		
		##commies 
		every_country = {
			limit = {
				NOT = {
					tag = SOV
					tag = PRC
					tag = YUG
					has_idea = NE_wp_member					
				}
				
				has_government = communism
				communism > 0.55				
			}
			
			set_political_party = { ideology = communism popularity = 0.52 } 
			add_ideas = NE_align_east		
		}
		
	}
	
	
	option = {
		name = ne_faction.1.a
		##placeholder		
	}

		
}

	##EVENT TO INFORM COUNTRY ABOUT NATIONAL SPIRIT (ne_align)!!!




##Country gets ready to join nato/wp spirit
country_event = {
	id = ne_faction.2
	title = ne_faction.2.t
	desc =  ne_faction.2.d
	picture = GFX_somepic
	
	trigger = {
	
		NOT = { has_country_flag = ne_event_ready_faction }
	
		OR = {
		
			AND = {
				has_idea = NE_align_west
				has_government = democratic
				democratic > 0.70
			}
			
			AND = {
				has_idea = NE_align_east
				has_government = communism
				communism > 0.70
			}
			
		}

	}
	
	immediate = { set_country_flag = ne_event_ready_faction }

	
	option = {	# okay
		name = ne_faction.2.a
		
		##Effects
		add_political_power = 15
		
		if = { limit = { has_idea = NE_align_west } swap_ideas = { remove_idea = NE_align_west add_idea = NE_ready_nato } } 
		if = { limit = { has_idea = NE_align_east } swap_ideas = { remove_idea = NE_align_east add_idea = NE_ready_wp } } 
	
	}
	
	
}


#####################################################
####    AI JOIN FACTION/NO PLAYER INTERACTION    ####
#####################################################


####Country gets event when has spirit NE_Ready and popularity > 0.90####
country_event = {
	id = ne_faction.3
	title = ne_faction.3.t
	desc =  ne_faction.3.d
	picture = GFX_somepic

	fire_only_once = yes

	trigger = {
	
		NOT = { has_country_flag = ne_join_event }
		NOT = { is_in_faction = yes }
		
		AND = {
			has_idea = NE_ready_nato
			democratic > 0.90
			has_government = democratic
		}
		
		AND = {
			has_idea = NE_ready_wp
			communism > 0.90
			has_government = communism			
		}
		
		USA = {
			exists = yes
			is_faction_leader = yes
			has_government = democratic	
		}
		
		SOV = {
			exists = yes
			is_faction_leader = yes
			has_government = communism	
		}
		
	}
	
	
	immediate = { 	
		set_country_flag = ne_join_event 		
	}
	
	
	option = {	# join
		name = ne_faction.3.a
		ai_chance = {
			factor = 75
			
		}
		
		if = {
			limit = { 
				has_government = democratic			
			}
			
			USA = { country_event = { days = 3 id = ne_faction.4 } }		
		}
		
		if = {
			limit = { 
				has_government = communism			
			}
			
			SOV = { country_event = { days = 3 id = ne_faction.4 } }		
		}
	
	}
	
	
	option = {	#Don't join
		name = ne_faction.3.b
		ai_chance = {
			factor = 25			
		}
		
		##Lose popularity
		if = { limit = { has_government = democratic } add_popularity = { ideology = democratic popularity = -0.25 } }
		if = { limit = { has_government = communism } add_popularity = { ideology = communism popularity = -0.25 } }

		hidden_effect = {
			##debug event
			country_event = { days = 100 id = ne_faction.7 }			
		}
	
	}
	
	
}


##SOV/USA can now accept or decline!
country_event = {
	id = ne_faction.4
	title = ne_faction.4.t
	desc =  ne_faction.4.d
	picture = GFX_somepic

	is_triggered_only = yes
	
	immediate = { 	
		#immediate effects here!		
	}
	
	
	option = {	# yes
		name = ne_faction.4.a
		ai_chance = { factor = 75 }

		##Effects
		add_political_power = 20		
		FROM = {
			country_event = { days = 1 id = ne_faction.5 }
		}

			
	}
	
	
	option = {	# no
		name = ne_faction.4.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				FROM = { has_war = yes }	
			}			
		}
		
		##Effects
		add_political_power = -20
		FROM = {
			country_event = { days = 1 id = ne_faction.6 }
		}

	}
	
	
}


##FROM: SOV/USA did let us join the alliance
country_event = {
	id = ne_faction.5
	title = ne_faction.5.t
	desc =  ne_faction.5.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#great
		name = ne_faction.1.a
		
		##Effects
		if = { limit = { has_government = democratic } swap_ideas = { remove_idea = NE_ready_nato add_idea = ne_nato_member } } 
		if = { limit = { has_government = communism } swap_ideas = { remove_idea = NE_ready_wp add_idea = ne_nato_member } }

		##actual membership
		if = { limit = { has_government = democratic } USA = { add_to_faction = ROOT } } 
		if = { limit = { has_government = communism } SOV = { add_to_faction = ROOT } } 
		
		hidden_effect = {		
			country_event = { days = 100 id = ne_faction.7 }			
		}
			
	}
	
	
}


##FROM: SOV/USA refused us entry!
country_event = {
	id = ne_faction.6
	title = ne_faction.6.t
	desc =  ne_faction.6.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#great
		name = ne_faction.6.a
		
		##Effects
		if = { limit = { has_government = democratic } add_opinion_modifier = { target = FROM modifier = refused_nato_membership }  }
		if = { limit = { has_government = communism } add_opinion_modifier = { target = FROM modifier = refused_warsaw_pact_membership }  }
		
		hidden_effect = {		
			country_event = { days = 200 id = ne_faction.7 }			
		}			
	}
	
	
}



##HIDDEN EVENT TO DELETE FLAG
country_event = {
	id = ne_faction.7

	hidden = yes
	is_triggered_only = yes
	
	immediate = { 	
		clr_country_flag = ne_join_event	
	}
	
	
	option = {	
		#placholder		
	}
	
	
}




#USING THE SLOTS#



##Debug Event (HIDDEN)
country_event = {
	id = ne_faction.8	
	title = "Message from [Root.getName]" #ne_faction.8.t; Do title even though it's hidden

	hidden = yes
	is_triggered_only = yes

	option = {	
	
		##Effects
		if = { limit = { has_government = democratic } country_event = { days = 1 id = ne_nato.2 }  }
		if = { limit = { has_government = communism } country_event = { days = 1 id = ne_wp.2 }  } 
	
	}
	
	
}



##SOV: Event to notify about the entry of Turkey
country_event = {
	id = namespace.1
	title = namespace.1.t
	desc =  namespace.1.d
	picture = GFX_somepic

	fire_only_once = yes
	
	trigger = {
	
		TUR = { is_in_faction_with = USA }
		NOT = { SOV = { is_in_faction_with = USA } } 
		
		USA = { has_government = democratic }
		SOV = { has_government = communism }
	
	}

	
	option = {	##We strongly condemn this
		name = namespace.1.a
		
		##Effects (negative opinion modifier)
		add_opinion_modifier = { target = TUR modifier = nato_neighbour } 
		add_opinion_modifier = { target = USA modifier = first_nato_expansion } 
		
		
		hidden_effect = {
			USA = { country_event = { days = 1 id = namespace.2 }	}	
			if = { limit = { NOR = { is_in_faction_with = USA } } add_opinion_modifier = { target = NOR modifier = nato_neighbour } }
		}
			
	}
	
	
}



##USA: SOV condems our expansion
country_event = {
	id = namespace.2
	title = namespace.2.t
	desc =  namespace.2.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes
	
	
	option = {	#We don't care!
		name = namespace.1.a		
			
	}
	
	
}



##SOVIET INVASION OF POLAND (Only on Historical)
country_event = {
	id = ne_skelsa.200
	title = ne_skelsa.200.t
	desc =  ne_skelsa.200.d
	picture = GFX_su_invasion_pol

	fire_only_once = yes

	
	trigger = {
		
		tag = SOV
		
		has_global_flag = sov_yes_pact
		is_historical_focus_on = yes
		GER = { has_war_with = POL }
		NOT = { GER = { has_war_with = SOV } }
		NOT = { SOV = { has_war_with = POL } }
		
		POL = { surrender_progress > 0.20 }
		
	}
	
	immediate = { 
	
	hidden_effect = {
	
		POL = { add_timed_idea = { days = 50 idea = NE_alone  }  }
		
		every_country = {
			limit = {
				is_in_faction_with = POL
				is_subject = no
			}
			
			add_timed_idea = { days = 50 idea = NE_alone }				
		}
		
		}
		
	}
	
	
	option = {	# Invade POL
		name = ne_skelsa.200.a
		ai_chance = {
			factor = 10
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes	
			}			
		}

		##Effects
		add_political_power = 20		
		declare_war_on = { target = POL } 
		
		
		hidden_effect = {
			set_global_flag = ne_soviet_invasion_poland
			POL = { country_event = { days = 1 id = ne_skelsa.201 }}
			GER = { country_event = { days = 1 id = ne_skelsa.202 }}
			ENG = { country_event = { days = 1 id = ne_skelsa.204 }}
			
			
		}
			
	}
	
	
	option = {	# better not
		name = ne_skelsa.200.b
		ai_chance = {
			factor = 90
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes		
			}			
		}
		
		##Effects
		add_political_power = -25
		
		hidden_effect = {
			every_country = {
			limit = {
				is_in_faction_with = POL
				is_subject = no
			}
			
			remove_ideas = NE_alone				
			}			
		}
		
	}
	
	
}



##POL reacts
country_event = {
	id = ne_skelsa.201
	title = ne_skelsa.201.t
	desc =  ne_skelsa.201.d
	picture = GFX_soviet_parade_lwow

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#we are doomed!
		name = ne_skelsa.201.a
		
		##Effects
		add_political_power = -175
		add_stability = -0.05
			
	}
	
	
}



##GER reacts
country_event = {
	id = ne_skelsa.202
	title = ne_skelsa.202.t
	desc =  ne_skelsa.202.d
	picture = GFX_hitler_bridge

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#very good
		name = ne_skelsa.202.a
			
	}
	
	
}



##ENG reacts
country_event = {
	id = ne_skelsa.204
	title = ne_skelsa.204.t
	desc =  ne_skelsa.204.d
	picture = GFX_soviet_parade_lwow

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#we can't have a war with both of them!
		name = ne_skelsa.204.a
		
		add_political_power = -20
			
	}
	
	
}



#better: create news event which will trigger this event
# Poland collapses; Eastern Poland goes to the USSR, Rest is occupied by GER, whitepeace event between POL - SOV
country_event = {
	id = ne_skelsa.203
	#picture = GFX_polish_division

	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
		
	
	##Poland falls apart
	option = {
		name = ne_skelsa.203.a

		
		##Transfer states to the SOV		
		if = {
			limit = {
				97 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 97 }
		}
		
		if = {
			limit = {
				96 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 96 }
		}
		
		if = {
			limit = {
				95 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 95 }
		}
		
		if = {
			limit = {
				94 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 94 }
		}
		
		if = {
			limit = {
				93 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 93 }
		}
		
		if = {
			limit = {
				91 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 91 }
		}
		
		if = {
			limit = {
				764 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 764 }
		}
		
		if = {
			limit = {
				770 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 770 }
		}
		
		if = {
			limit = {
				89 = {					
					is_owned_by = POL
				}
			}
			SOV = { transfer_state = 89 }
		}

		
		##GER occupies the rest
		if = {
			limit = {
				85 = {					
					is_owned_by = POL
				}
			}
			GER = { set_state_controller = 85 }
		}
		
		if = {
			limit = {
				86 = {					
					is_owned_by = POL
				}
			}
			GER = { set_state_controller = 86 }
		}
		
		if = {
			limit = {
				87 = {					
					is_owned_by = POL
				}
			}
			GER = { set_state_controller = 87 }
		}
		
		if = {
			limit = {
				98 = {					
					is_owned_by = POL
				}
			}
			GER = { set_state_controller = 98 }
		}
		
		if = {
			limit = {
				10 = {					
					is_owned_by = POL
				}
			}
			GER = { set_state_controller = 10 }
		}
		
		if = {
			limit = {
				92 = {					
					is_owned_by = POL

				}
			}
			GER = { set_state_controller = 92 }
		}
		
		if = {
			limit = {
				88 = {					
					is_owned_by = POL
					
				}
			}
			GER = { set_state_controller = 88 }
		}
		
		if = {
			limit = {
				90 = {					
					is_owned_by = POL
					
				}
			}
			GER = { set_state_controller = 90 }
		}
		
		if = {
			limit = {
				72 = {					
					is_owned_by = POL
					
				}
			}
			GER = { set_state_controller = 72 }
		}
		
		##Annexing Danzig-Stadt
		if = {
			limit = {
				784 = {					
					is_owned_by = DAN
				}
				DAN = { is_puppet_of = POL }
			}
			GER = { transfer_state = 784 }
		}
		
		##whitepeace between SOV and POL
		SOV = { white_peace = POL }
		
		##Set Global FLAG
		set_global_flag = POL_collapse
		
	}
}



# New Europe: Poland conquered... honor MR Pact? (ONLY APPLIES IF SU DIDN'T INVADE POL)
country_event = {
	id = germany.14
	title = germany.14.t
	desc = germany.14.d
	picture = GFX_german_troops
	
	fire_only_once = yes

	trigger = {
		tag = GER
		has_global_flag = sov_yes_pact
		NOT = { has_global_flag = ne_soviet_invasion_poland }
		SOV = { exists = yes }
		NOT =  { has_war_with = SOV }
		OR = {
			OR = {
				owns_state = 96
				owns_state = 95
				owns_state = 94
				owns_state = 93
				owns_state = 91
				owns_state = 97
				owns_state = 764
				owns_state = 770
				owns_state = 89
			}
			AND = {
				POL = { has_capitulated = yes }
				OR = {
					controls_state = 96
					controls_state = 95
					controls_state = 94
					controls_state = 93
					controls_state = 91
					controls_state = 97
					controls_state = 764
					controls_state = 770
					controls_state = 89
				}
			}
			OR = {
				any_other_country = {
					is_in_faction_with = GER
					GER = {
						is_faction_leader = yes
					}
					OR = {
						owns_state = 96
						owns_state = 95
						owns_state = 94
						owns_state = 93
						owns_state = 91
						owns_state = 97
						owns_state = 89
						owns_state = 764
						owns_state = 770
						AND = {
							POL = { has_capitulated = yes }
							OR = {
								controls_state = 96
								controls_state = 95
								controls_state = 94
								controls_state = 93
								controls_state = 91
								controls_state = 97
								controls_state = 89
								controls_state = 764
								controls_state = 770
							}
						}		
					}
				}
			}
		}
	}

	
	mean_time_to_happen = {	days = 1 }
	
	
	option = {
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				AND = {
					POL = {
						is_ai = no
						has_civil_war = no
					}
					is_in_faction_with = POL
				}
			}
		}
		name = germany.14.a
		if = {
			limit = {
				96 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 96
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 96 }
		}
		if = {
			limit = {
				95 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 95
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 95 }
		}
		if = {
			limit = {
				94 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 94
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 94 }
		}
		if = {
			limit = {
				93 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 93
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 93 }
		}
		if = {
			limit = {
				91 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 91
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 91 }
		}
		if = {
			limit = {
				97 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 97
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 97 }
		}
		if = {
			limit = {
				89 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 89
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 89 }
		}
		if = {
			limit = {
				764 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 764
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 764 }
		}
		if = {
			limit = {
				770 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 770
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
			}
			SOV = { transfer_state = 770 }
		}
		SOV = { country_event = germany.15 }
	}
	option = {
		name = germany.14.b
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				is_historical_focus_on = yes
				NOT = {
					AND = {
						POL = {
							is_ai = no
							has_civil_war = no
						}
						is_in_faction_with = POL
					}
				}
			}
		}
		SOV = { country_event = germany.16 }
		clr_global_flag = sov_yes_pact
		diplomatic_relation = {
			country = SOV
			relation = non_aggression_pact
			active = no
		}		
		SOV = {
			add_state_claim = 96
			add_state_claim = 95
			add_state_claim = 94
			add_state_claim = 93
			add_state_claim = 91
			add_state_claim = 97
			add_state_claim = 89
			add_state_claim = 764
			add_state_claim = 770
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = GER
				}
			}
		}
	}
}

# Germany honors MR Pact (Soviets)
country_event = {
	id = germany.15
	title = germany.15.t
	desc = germany.15.d
	picture = GFX_soviet_german_soldier_handshake

	is_triggered_only = yes
	
	option = {
		name = germany.12.a
		if = {
			limit = {
				SOV = {
					controls_state = 93
					controls_state = 94
				}
			}
			hidden_effect = {
				news_event = { hours = 6 id = news.33 }
			}
		}
	}
}

# Germany betrays MR Pact (Soviets)
country_event = {
	id = germany.16
	title = germany.16.t
	desc = germany.16.d
	picture = GFX_german_troops

	is_triggered_only = yes
	
	option = {
		name = germany.16.a
		create_wargoal = {
			type = annex_everything
			target = GER
		}
	}
}




##Brother Hao joins the PLA
country_event = {
	id = ne_skelsa.1
	title = ne_skelsa.1.t
	desc =  ne_skelsa.1.d
	picture = GFX_brother_hao

	hidden = yes
	fire_only_once = yes

	
	trigger = {
		tag = PRC
		
		PRC = {
			exists = yes
			is_subject = no
			has_government = communism
			
			date > 1947.1.11
		}
	
	
	}
	
	
	mean_time_to_happen = {	days = 1 }
	
	immediate = { 
		#
	}
	
	
	option = { #without the Communist Party, there will be no new China!
		name = ne_skelsa.1.a
		
		create_corps_commander = { name = "Brother Hao" picture = "Portrait_PRC_General_Brother_Hao.dds" traits = { } skill = 4 } 
		
		if = {
			limit = {
				has_global_flag = ne_music_chosen
			}
		}
		PRC = { sound_effect = communist_party }
		
	}
	
}


##Greek civil war: ne_skelsa.50-55










##ne_skelsa.75: Player not in historical focus!
country_event = {
	id = ne_skelsa.75
	title = ne_skelsa.75.t
	desc = ne_skelsa.75.d
	picture = GFX_no_historical_focuses

	is_triggered_only = yes

	immediate = {
		set_country_flag = warning_no_historical 
	}

	option = {
		name = ne_skelsa.75.a
		custom_effect_tooltip = warning_for_a_player.1.tt
		ai_chance = { factor = 1 }

	}
	
	option = {
		name = ne_skelsa.75.b
		custom_effect_tooltip = warning_for_a_player_quit.1.tt
		ai_chance = { factor = 0 }
	
		hidden_effect = { if = { limit ={ is_ai = no } LUX = { annex_country = { target = ROOT } } } }
	}
}

##ne_skelsa.76: Partition of YUG
country_event = {
	id = ne_skelsa.76
	title = ne_skelsa.76.t
	desc = ne_skelsa.76.d ##The artificial product of Versailles is now gone! Give minorities to our allies. No longer suppressed. Mistakes of Versailles undone
	picture = GFX_yugoslavian_split

	fire_only_once = yes
	
	trigger = {

		tag = GER
		is_historical_focus_on = yes
	
		GER = {
			exists = yes
			has_government = fascism
			has_war_with = ENG
			is_faction_leader = yes
			is_in_faction_with = ITA
		}
	
		YUG = {
			exists = yes
			has_capitulated = yes
			has_war_with = GER
			has_war_with = ITA	
		}
		
		107 = {
			is_owned_by = YUG
			OR = { 
				is_controlled_by = GER
				any_country = { is_in_faction_with = GER  controls_state = PREV }
			}		
		}
		
		109 = {
			is_owned_by = YUG
			OR = { 
				is_controlled_by = GER
				any_country = { is_in_faction_with = GER  controls_state = PREV }
			}		
		}
		
	}


	option = {		##Let's partition it (set_state_controller)
		name = ne_skelsa.76.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes	
			}			
		}

		##Add country flag to Yugoslavia
		YUG = { set_country_flag = ne_axis_occupied }	
			
			##GERMANY					
			if = {
				limit = {
					794 = {
						is_owned_by = YUG
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 794		add_state_claim = 794 }
				
			}
			
			if = {
				limit = {
					108 = {
						is_owned_by = YUG
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 108		add_state_claim = 108 }
			}
			
			if = {
				limit = {
					107 = {
						is_owned_by = YUG
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 107		add_state_claim = 107 }
			}
			
			if = {
				limit = {
					767 = {
						is_owned_by = YUG
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 767		add_state_claim = 767 }
			}
			
			if = {
				limit = {
					102 = {
						is_owned_by = YUG
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 102		add_state_claim = 102 }
			}

			
			
			##ITALY
			if = {
				limit = {
					ITA = {
						exists = yes
						is_in_faction_with = GER
					}
				}
				
					
				if = {
					limit = {
						105 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 105		add_state_claim = 105 }
				}
				
				if = {
					limit = {
						780 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 780		add_state_claim = 780 }
				}
				
				if = {
					limit = {
						778 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 778		add_state_claim = 778 }
				}
		
		
			}
			
			
			##Croatia
			if = {
				limit = {
					is_historical_focus_on = yes
				}
				
					
				if = {
					limit = {
						109 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					CRO = { transfer_state = 109		add_state_claim = 109 }
				}
				
				if = {
					limit = {
						103 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					CRO = { transfer_state = 103		add_state_claim = 103 }
				}
				
				
				if = {
					limit = {
						104 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					CRO = { transfer_state = 104		add_state_claim = 104 }
				}

				GER = { puppet = CRO }
		
		
			}
			
			
			##BULGARIA
			if = {
				limit = {
					BUL = {
						exists = yes
						is_in_faction_with = GER
					}
				}
				
					
				if = {
					limit = {
						106 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					BUL = { set_state_controller = 106		add_state_claim = 106 }
				}
				
				if = {
					limit = {
						779 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					BUL = { set_state_controller = 779		add_state_claim = 779 }
				}

		
			}
			
			
			##HUNGARY
			if = {
				limit = {
					HUN = {
						exists = yes
						is_in_faction_with = GER
					}
				}
				
					
				if = {
					limit = {
						45 = {
							is_owned_by = YUG
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					HUN = { set_state_controller = 45		add_state_claim = 45 }
				}
				
				
			}
					

	}
	
	option = {		##No
		name = ne_skelsa.76.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes	
			}			
		}
		
		
		
		add_political_power = -40

	}
}



##ne_skelsa.77: Partition of GRE
country_event = {
	id = ne_skelsa.77
	title = ne_skelsa.77.t
	desc = ne_skelsa.77.d
	picture = GFX_yugoslavian_split

	trigger = {

		tag = GER
		is_historical_focus_on = yes
	
		GER = {
			exists = yes
			has_government = fascism
			has_war_with = ENG
			is_faction_leader = yes
			is_in_faction_with = ITA
		}
	
	
		GRE = {
			exists = yes
			has_capitulated = yes
			has_war_with = GER
			has_war_with = ITA		
		}
		
		
		47 = {
			is_owned_by = GRE
			OR = { 
				is_controlled_by = GER
				any_country = { is_in_faction_with = GER  controls_state = PREV }
			}	
		}
		
		731 = {
			is_owned_by = GRE
			OR = { 
				is_controlled_by = GER
				any_country = { is_in_faction_with = GER  controls_state = PREV }
			}	
		}
		

	}
	

	option = {		##Let's partition it (set_state_controller)
		name = ne_skelsa.77.a
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 100
				is_historical_focus_on = yes	
			}			
		}
			
		##Add country flag to Greece
		GRE = { set_country_flag = ne_axis_occupied }
			
			##GERMANY					
			if = {
				limit = {
					187 = {
						is_owned_by = GRE
							#OR = {		####Aegean islands are not always occupied!
							#	is_controlled_by = GER
							#	any_country = { is_in_faction_with = GER  controls_state = PREV }
							#}	
					}						
				
				}
			
				GER = { set_state_controller = 187		add_state_claim = 187 }
			}
			
			if = {
				limit = {
					184 = {
						is_owned_by = GRE
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 184		add_state_claim = 184 }
			}
			
			if = {
				limit = {
					731 = {
						is_owned_by = GRE
							OR = { 
								is_controlled_by = GER
								any_country = { is_in_faction_with = GER  controls_state = PREV }
							}	
					}						
				
				}
			
				GER = { set_state_controller = 731		add_state_claim = 731 }
			}
			
			
			##BULGARIA
			if = {
				limit = {
					BUL = {
						exists = yes
						is_in_faction_with = GER
					}
				}
				
					
				if = {
					limit = {
						184 = {
							is_owned_by = GRE
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					BUL = { set_state_controller = 184		add_state_claim = 184 }
				}
				
				
			}
			
			
			##ITALY
			if = {
				limit = {
					ITA = {
						exists = yes
						is_in_faction_with = GER
					}
				}
				
					
				if = {
					limit = {
						47 = {
							is_owned_by = GRE
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 47		add_state_claim = 47 }
				}
				
				if = {
					limit = {
						186 = {
							is_owned_by = GRE
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 186		add_state_claim = 186 }
				}
				
				if = {
					limit = {
						185 = {
							is_owned_by = GRE
								OR = { 
									is_controlled_by = GER
									any_country = { is_in_faction_with = GER  controls_state = PREV }
								}	
						}						
					
					}
				
					ITA = { set_state_controller = 185		add_state_claim = 186 }
				}
				
				
			}
	

	}
	
	option = {		##No
		name = ne_skelsa.77.b
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0
				is_historical_focus_on = yes	
			}			
		}
		
		add_political_power = -25

	}
}


##SOV: Propose to Germany a change in the M-R Pact
country_event = {
	id = ne_skelsa.80
	title = ne_skelsa.80.t
	desc =  ne_skelsa.80.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#Still not finished I guess?
		name = ne_skelsa.80.a

		##Effects
		add_political_power = 10
			
	}

	
}



##GER: is informed about Soviet proposal
country_event = {
	id = ne_skelsa.82
	title = ne_skelsa.82.t
	desc =  ne_skelsa.82.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#We'll do this
		name = ne_skelsa.82.a

		##Effects
		add_political_power = 10
			
	}

	
}



##SOV: is informed that it was kicked out of the LON (triggered by Winter War)
country_event = {
	id = ne_skelsa.85
	title = ne_skelsa.85.t
	desc =  ne_skelsa.85.d
	picture = GFX_lon

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#pp loss (small)
		name = ne_skelsa.85.a

		##Effects
		add_political_power = -10
			
	}

	
}



##SOV: T-34 and KV-1 development
country_event = {
	id = ne_skelsa.86
	title = ne_skelsa.86.t
	desc =  ne_skelsa.86.d
	picture = GFX_t34

	trigger = {
		tag = SOV
		date > 1940.1.31 
		
		#Conditions might need a check
		NOT = { has_tech = improved_medium_tank  }
		NOT = {  has_tech = basic_heavy_tank  }
	
	}
	
	fire_only_once = yes

	
	option = {	#gain army experience, 150 tanks and tech
		name = ne_skelsa.86.a

		##Effects
		army_experience = 15
		add_equipment_to_stockpile = { type = medium_tank_equipment_2  amount = 117 producer = SOV } 
		add_equipment_to_stockpile = { type = heavy_tank_equipment_1  amount = 50 producer = SOV }
		
		set_technology = { improved_medium_tank = 1 } 
		set_technology = { basic_heavy_tank = 1 } 
		
	}

	
}



##SOV, CHI: Get spirit "desperate defense"
country_event = {
	id = ne_skelsa.87
	title = ne_skelsa.87.t
	desc =  ne_skelsa.87.d
	picture = GFX_swedish_soldier

	trigger = {
	
		OR = {
			tag = SOV
			tag = CHI
		}
	
		NOT = { has_idea = NE_desperate_defense }
		NOT = { has_country_flag = ne_desperate_defense }
		surrender_progress > 0.60 
		 
	
	}	
	
	
	immediate = { set_country_flag = ne_desperate_defense }
	
	
	option = {		##We will defend our home at all costs
		name = ne_skelsa.87.a

		##Effects
		 	add_ideas = NE_desperate_defense 
		add_political_power = -20		
		add_manpower = 20000
		add_war_support = 0.15
		
		if = {
			limit = { has_stability < 50 }
			
		add_stability = 0.15
					
		}
		
		
	}

	
}



##SOV, CHI: Lose spirit "desperate defense"
country_event = {
	id = ne_skelsa.88
	title = ne_skelsa.88.t
	desc =  ne_skelsa.88.d
	picture = GFX_swedish_soldier


	trigger = {
	
		OR = {
			tag = SOV
			tag = CHI
		}
	
		has_idea = NE_desperate_defense
		#NOT = { has_country_flag = lost_desperate_defense } TEST
		surrender_progress < 0.40 
		 
	
	}

	#immediate = { set_country_flag = lost_desperate_defense } TEST
	
	
	option = {	#lose spirit
		name = ne_skelsa.88.a

		##Effects
		remove_ideas = NE_desperate_defense
			
	}

	
}



##Hidden Event for GRE and YUG so Axis lose their claims there
country_event = {
	id = ne_skelsa.89
	
	hidden = yes


	trigger = {
	
		OR = {
			tag = GRE
			tag = YUG
		}
		
		has_country_flag = ne_axis_occupied
	
		NOT = { has_country_flag = freed_from_axis_occupation } 
		
		surrender_progress < 0.05
			 
	
	}

	immediate = { set_country_flag = freed_from_axis_occupation } 
	
	
	option = {	#Axis lose claims
		#name = ne_skelsa.88.a

		##Effects TESTING	
		if = {
			limit = { tag = GRE }
		}
		
		every_state = {
			limit = {
				is_core_of = GRE
				OR = {
					is_claimed_by = GER
					is_claimed_by = ITA
					is_claimed_by = BUL
					is_claimed_by = HUN
					is_claimed_by = CRO
				}
			}
			
			every_country = {
				limit = {
					any_state = {
						is_core_of = GRE
						is_claimed_by = PREV				
					}
				
				}
			
			remove_state_claim = PREV
			}
					
		}

		if = {
			limit = { tag = YUG }
		}
		
		every_state = {
			limit = {
				is_core_of = YUG
				OR = {
					is_claimed_by = GER
					is_claimed_by = ITA
					is_claimed_by = BUL
					is_claimed_by = HUN
					is_claimed_by = CRO
				}
			}
			
			every_country = {
				limit = {
					any_state = {
						is_core_of = YUG
						is_claimed_by = PREV				
					}
				
				}
			
			remove_state_claim = PREV
			}
		}
	}

	
}



##ne_skelsa.90 is about Metaxas' death event chain

##Metaxas dies (Before Fall of Athens)
country_event = {
	id = ne_skelsa.90
	title = ne_skelsa.90.t
	desc =  ne_skelsa.90.d
	picture = GFX_metaxas_death

	fire_only_once = yes

	trigger = {
	
		tag = GRE
		has_war_with = GER
		has_war_with = ITA
		surrender_progress > 0.05
		has_country_leader = { name = "Ioannis Metaxas" }
	
	}
	
	
	option = {	#stability loss (small)
		name = ne_skelsa.90.a

		##Effects
		add_stability = -0.02
		
		kill_country_leader = yes
		create_country_leader = { name = "George II of Greece" picture = "Portrait_GRE_George_II.dds" expire = "1965.1.1" ideology = moderatism traits = { } }
		set_party_name = { ideology = neutrality name = GRE_House_of_Glucksburg }	
	}

	
}



##Democratic and  can assist Rep. Spain with guns
country_event = {
	id = ne_skelsa.115
	title = ne_skelsa.115.t
	desc =  ne_skelsa.115.d
	picture = GFX_report_event_spain_civil_war_volunteers_02

	trigger = {
	
		OR = {
			tag = MEX
			tag = SOV
			tag = USA
			tag = FRA
			tag = ENG		
		}
			
		NOT = { has_country_flag = ne_guns_for_spain }
		
		SPR = {
			has_civil_war = yes				
		}
	
	}
	
	mean_time_to_happen = { days = 20 }
	
	immediate = {
	
		set_country_flag = ne_guns_for_spain 
		
	}
	
	
	option = {	#We will help them
		name = ne_skelsa.115.a	
		
		##AI Chance
		ai_chance = {
			factor = 50
					
			modifier = {
				factor = 100
				
				is_historical_focus_on = yes
				OR = {
					tag = MEX
					tag = SOV				
				}
			}			
		}

		##Effects
		add_political_power = 10
		
		custom_effect_tooltip = spain_civil_war_help
		
		every_country = {
			limit = {
				original_tag = SPR
				has_government = communism
			}
			
			country_event = { days = 1 id = ne_skelsa.117 }
		}
		
			
	}
	
	
	option = {	#There's no reason for us to get involved
		name = ne_skelsa.115.b
		
		##AI Chance
		ai_chance = {
			factor = 50
					
			modifier = {
				factor = 0
				
				is_historical_focus_on = yes
				OR = {
					tag = USA
					tag = FRA
					tag = ENG
				}
			}			
		}	

		##Effects
		add_political_power = -10
		add_war_support = -0.02
			
	}

	
}



##Fascist countries an support Franco with guns
country_event = {
	id = ne_skelsa.116
	title = ne_skelsa.116.t
	desc =  ne_skelsa.116.d
	picture = GFX_report_event_spain_civil_war_volunteers_01

	trigger = {
	
		OR = {
			tag = GER
			tag = ITA
			tag = POR	
		}
			
		NOT = { has_country_flag = ne_guns_for_spain }
		
		SPR = {
			has_civil_war = yes				
		}
	
	}
	
	mean_time_to_happen = { days = 15 }
	
	immediate = {
	
		set_country_flag = ne_guns_for_spain 
		
	}
	
	
	option = {	#We will help them
		name = ne_skelsa.116.a	
		
		##AI Chance
		ai_chance = {
			factor = 50
					
			modifier = {
				factor = 100
				
				is_historical_focus_on = yes
				OR = {
					tag = GER
					tag = ITA
					tag = SOV				
				}
			}			
		}

		##Effects
		add_political_power = 10
		
		custom_effect_tooltip = nat_spain_civil_war_help
		
		every_country = {
			limit = {
				original_tag = SPR
				has_government = fascism
			}
			
			country_event = { days = 1 id = ne_skelsa.117 }
		}
		
			
	}
	
	
	option = {	#There's no reason for us to get involved
		name = ne_skelsa.116.b
		
		##AI Chance
		ai_chance = {
			factor = 50
					
			modifier = {
				factor = 0
				
				is_historical_focus_on = yes				
			}			
		}	

		##Effects
		add_political_power = -10
		add_war_support = -0.05
			
	}

	
}





##Spain gets event about Foreign Assistance
country_event = {
	id = ne_skelsa.117
	title = ne_skelsa.117.t
	
	desc = {
	text = ne_skelsa.117.d1
		trigger = {
			has_government = fascism
		}
	}
	
	desc = {
	text = ne_skelsa.117.d
		trigger = {
			has_government = communism
		}
	}
	
	picture = report_event_spain_civil_war_soldiers

	is_triggered_only = yes

	
	option = {	#Great
		name = ne_skelsa.1.a
		
		##Effects
		add_opinion_modifier = { target = FROM modifier = helped_spain_civil_war } 
		
		##Foreign Volunteers
		add_manpower = 5000	
		hidden_effect = { FROM = { add_manpower = -5000} }
		
		##Requires some testing surely
		
		##Soviet
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = SOV
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = SOV } 
			}
		
		}
		
		##Mexico
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = MEX
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = MEX } 
			}
		
		}
		
		##US
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = USA
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = USA } 
			}
		
		}
		
		##FRA
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = FRA
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = FRA } 
			}
		
		}
		
		##ENG
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = ENG
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = ENG } 
			}
		
		}
		
		##ITA
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = ITA
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = ITA } 
			}
		
		}
		
		##POR
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = POR
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = POR } 
			}
		
		}
		
		##GER
		every_country = {
			if = {
				limit = {
					tag = FROM
					tag = GER
				}
				
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = GER } 
			}
		
		}

		
		
			
	}
	
	
}




##India gets event about her independence
country_event = {
	id = ne_skelsa.7
	title = ne_skelsa.7.t
	desc =  ne_skelsa.7.d
	picture = GFX_somepic

	is_triggered_only = yes
	fire_only_once = yes

	
	option = {	#AFTER ALL THESE CENTURIES WE'RE FREE!
		name = ne_skelsa.7.a

		##Effects
		add_political_power = 125
		add_stability = 0.10
			
	}

	
}




##WW2 victims
country_event = {
	id = ne_skelsa.5
	title = ne_skelsa.5.t
	desc =  ne_skelsa.5.d
	picture = GFX_somepic

	fire_only_once = yes

	
	trigger = {
				
		GER = {
			exists = yes
			is_subject = no
			is_faction_leader = yes 
			has_government = fascism
		}
		
		has_war_with = GER
		
	}
	
	
	mean_time_to_happen = {	days = 1 }

	
	option = {	#dark times for our nation
		name = ne_skelsa.5.a

		##Effects
		add_political_power = 15
		set_country_flag = ww2_victim
			
	}

	
}








##NEEDS HEAVY REWORK##
####FLAG CHANGES####

##First flag change
country_event = {
	id = ne_flag.1
	title = ne_flag.1.t
	desc =  ne_flag.1.d
	picture = GFX_somepic

	hidden = yes
	fire_only_once = yes

	
	trigger = {
	
		tag = SOV
		
		has_global_flag = names_chosen
		
		SOV = {
			exists = yes
			has_government = communism						
		}
		
		date > 1936.12.5
	
	
	}
	
	
	mean_time_to_happen = {	days = 1 }
	
	immediate = { 
		#
	}
	
	
	option = { # option one
		name = ne_flag.1.a
		
		drop_cosmetic_tag = yes
		
	}
	
	option = { # option one
		name = ne_flag.1.a
		
		
	}
	
}


##Vyborg (might need better id)
country_event = {
	id = ne_city.30
	title = ne_city.30.t
	desc = ne_city.30.d
	picture = GFX_stalin_02
	
	fire_only_once = yes
	
	trigger = {
	
		tag = SOV
		owns_state = 146
		NOT = { has_global_flag = renamed_vyborg }
	}

	mean_time_to_happen = {
		days = 10
	}


	option = {
		name = ne_city.1.a
		set_province_name = { id = 9206 name = vyborg }
		set_global_flag = renamed_vyborg
	}
	
}
